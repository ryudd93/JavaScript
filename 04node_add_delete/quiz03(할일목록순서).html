<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>

    <h2>할일 삭제 기능은 아직 구현x</h2>
    <h2>toDoList</h2>
    
    <form class="nameForm">
        <h3 class="nameTitle"></h3> <!--숨겨놓을 영역-->
        <input type="text" placeholder="이름을 입력하세요">
        <button type="button">확인</button>
    </form>
    
    <form class="todoForm">
        <input type="text" id="text" placeholder="할일을 적으세요">
        <button type="button">확인</button>
    </form>
    
    <ul class="todoList">
    </ul>



    <script>

        var nameForm = document.querySelector(".nameForm");
        var nameInput = nameForm.querySelector("input");
        var nameButton = nameForm.querySelector("button");
        var nameTitle = nameForm.querySelector("h3");

        nameButton.addEventListener("click", regist);

        function regist() {
            nameTitle.innerHTML = nameInput.value + "님! 안녕하세요!";
            nameInput.style.display = "none";
            nameButton.style.display = "none";
        }


        var todoForm = document.querySelector(".todoForm");
        var todoInput = todoForm.querySelector("input");
        var todoButton = todoForm.querySelector("button");

        todoButton.addEventListener("click", handleTodo);
        function handleTodo() {
            creatTodo(todoInput.value); //엘리먼트 생성메스드에 input의 value값을 전달
            todoInput.value = "";   //input값 초기화
        }


        function creatTodo(text) {
            var ul = document.querySelector(".todoList");
            
            // 버튼 생성
            var btn = document.createElement("button");
            var btnup = document.createElement("button");
            var btndown = document.createElement("button");
            btn.innerHTML = "x";
            btnup.innerHTML = "↑";
            btndown.innerHTML = "↓";
            btn.addEventListener("click", deleteTodo);
            btnup.addEventListener("click", upTodo);
            btndown.addEventListener("click", downTodo);

            // li생성
            var li = document.createElement("li");
            li.innerHTML = text;

            // li에 버튼 추가
            li.appendChild(btn);
            li.appendChild(btnup);
            li.appendChild(btndown);
            console.log(li);

            // ul에 li를 추가
            ul.appendChild(li);


        }

        
        function deleteTodo() {
            this.parentElement.remove();
        }

        function upTodo() {
            var todoList = document.querySelector(".todoList");
            console.log(this);
            var current = this.parentElement;
            var pre = current.previousElementSibling;
            // var li = document.querySelector(".li");

            console.log(current);
            console.log(pre);

            if (confirm("이동하시겠습니까?")) {
                todoList.insertBefore(current, pre);
            }
            
            // console.log(pre, current);
        }

        function downTodo(node) {
            var todoList = document.querySelector(".todoList");
            console.log(this);
            var current = this.parentElement;
            var next = current.nextElementSibling;
            // var li = document.querySelector(".li");

            console.log(current);
            console.log(next);

            if (confirm("이동하시겠습니까?")) {
                todoList.insertBefore(next, current);
            }
        }
    </script>

    
</body>
</html>